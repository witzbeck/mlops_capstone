FROM ghcr.io/mlflow/mlflow:v2.12.2


ARG MLFLOW_DB_USER
ARG MLFLOW_DB_PASSWORD
ARG MLFLOW_DB_NAME
ARG POSTGRES_HOST
ARG POSTGRES_PORT
ARG MLFLOW_TRACKING_URI
ARG MLFLOW_STORE_URI

# Set the environment variables
ENV MLFLOW_DB_USER=$MLFLOW_DB_USER
ENV MLFLOW_DB_PASSWORD=$MLFLOW_DB_PASSWORD
ENV MLFLOW_DB_NAME=$MLFLOW_DB_NAME
ENV POSTGRES_HOST=$POSTGRES_HOST
ENV POSTGRES_PORT=$POSTGRES_PORT
ENV MLFLOW_TRACKING_URI=$MLFLOW_TRACKING_URI
ENV MLFLOW_STORE_URI=$MLFLOW_STORE_URI

# Install the required packages
RUN pip install psycopg2-binary==2.9.1

# Set the working directory
WORKDIR /mlflow

